<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#0f172a">
  <meta charset="UTF-8">
  <title>Parcel Status</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fc;
      font-family: "Segoe UI", sans-serif;

    }

    .profile-img {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .balance-box {
      background: linear-gradient(to right, #00c853, #00e676);
      color: white;
      border-radius: 1rem;
      box-shadow: 0 3px 12px rgba(0, 200, 83, 0.25);
    }

    .subscription-card {
      transition: all 0.3s ease;
      border-left: 4px solid #6366f1;
    }

    .subscription-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
    }

    .text-bg-primary {
      background-color: #6366f1 !important;
      color: white !important;
    }

    .btn-success {
      background-color: #16a34a;
      border: none;
    }

    .btn-success:hover {
      background-color: #15803d;
    }

    .settings-link {
      transition: all 0.2s ease-in-out;
    }

    .settings-link:hover {
      background-color: #f8f9fa;
      text-decoration: none;
    }

    .nav-bottom {
      border-top: 1px solid #dee2e6;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      z-index: 1030;
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
    }

    .nav-bottom .nav-item {
      flex: 1;
      text-align: center;
      color: #6b7280;
      font-size: 0.85rem;
    }

    .nav-bottom .nav-item.active-tab {
      color: #4f46e5;
      font-weight: 600;
    }

    /* Responsive Enhancements */
    @media (max-width: 576px) {
      .profile-img {
        width: 60px;
        height: 60px;
      }

      .container {
        padding-left: 1rem;
        padding-right: 1rem;
      }

      .balance-box h3 {
        font-size: 1.5rem;
      }

      .btn {
        font-size: 0.875rem;
      }

      .settings-link i {
        font-size: 1.1rem;
      }
    }
  </style>
</head>

<body class="bg-light">

  <!-- Navbar -->
  <%- include('../partials/navbar') %>

    <!-- Main Content -->
    <div class="container my-4 mt-5">
      <div class="text-center mb-4">
        <img src="https://cdn-icons-png.flaticon.com/512/921/921087.png" class="profile-img mb-2" />
        <h5 class="fw-bold mb-0">
          <%= user.username %>
        </h5>

        <% if (user.email) { %>
          <p class="text-muted mb-1">
            <%= user.email %>
          </p>
          <% } else if (user.phone) { %>
            <p class="text-muted mb-1">
              <%= user.phone %>
            </p>
            <% } else { %>
              <p class="text-muted mb-1">No contact info</p>
              <% } %>

                <div class="d-flex justify-content-center gap-3 text-muted small mt-2">
                  <% if (user.phone && user.isPhoneVerified) { %>
                    <div>
                      <i class="bi bi-phone-fill me-1 text-success"></i>Phone Verified
                      <p>
                        <%= user.phone %>
                      </p>
                    </div>
                    <% } else if (user.phone && !user.isPhoneVerified) { %>
                      <div>
                        <i class="bi bi-phone-slash-fill me-1 text-danger"></i>Phone Not Verified
                        <p>
                          <%= user.phone %>
                        </p>
                        <a href="/mobile/link-phone" class="btn btn-outline-primary btn-sm mt-2">
                          <i class="bi bi-link me-1"></i> Verify Phone Number
                        </a>
                      </div>
                      <% } else { %>
                        <div>
                          <i class="bi bi-phone me-1 text-muted"></i>No Phone Linked
                          <br />
                          <a href="/mobile/link-phone" class="btn btn-outline-primary btn-sm mt-2">
                            <i class="bi bi-plus-circle me-1"></i> Link Phone Number
                          </a>
                        </div>
                        <% } %>


                          <% if (user.googleId) { %>
                            <div>
                              <i class="bi bi-google me-1 text-danger"></i>Google Linked
                              <p>
                                <%= user.email%>
                              </p>
                            </div>
                            <% } else { %>
                              <div>
                                <i class="bi bi-google me-1 text-muted"></i>Google Not Linked <br />

                                </a>

                              </div>
                              <% } %>

                </div>



      </div>


<% 
  const credits = user.wallet?.credits || 0; 
  const inrRate = 1; // 1 credit = ₹1
  const inrEquivalent = credits * inrRate;

%>

            <!-- Account Balance -->
            <div class="p-4 mb-4 balance-box text-center">
              <h6 class="mb-1">Account Balance</h6>
              <h3 class="fw-bold">
                <%= credits %> Credits
              </h3>
              <div class="mb-2">≈ ₹ <%= inrEquivalent %>
              </div>
              <button class="btn btn-light btn-sm fw-semibold" onclick="location.href='/wallet/topup'">
                <i class="bi bi-plus-circle me-1"></i> Top Up
              </button>
            </div>



            <!-- Extended Settings Menu -->
            <div class="bg-white rounded shadow-sm p-2 mb-5">
              <a href="#"
                class="d-flex justify-content-between align-items-center py-3 border-bottom text-decoration-none text-dark">
                <div><i class="bi bi-credit-card me-2"></i>Payment Methods</div>
                <i class="bi bi-chevron-right"></i>
              </a>
              <a href="#"
                class="d-flex justify-content-between align-items-center py-3 border-bottom text-decoration-none text-dark">
                <div><i class="bi bi-clock-history me-2"></i>Transaction History</div>
                <i class="bi bi-chevron-right"></i>
              </a>
              <a href="#"
                class="d-flex justify-content-between align-items-center py-3 border-bottom text-decoration-none text-dark">
                <div><i class="bi bi-bell me-2"></i>Notifications</div>
                <i class="bi bi-chevron-right"></i>
              </a>
              <a href="#"
                class="d-flex justify-content-between align-items-center py-3 border-bottom text-decoration-none text-dark">
                <div><i class="bi bi-shield-lock me-2"></i>Privacy & Security</div>
                <i class="bi bi-chevron-right"></i>
              </a>
              <a href="#"
                class="d-flex justify-content-between align-items-center py-3 border-bottom text-decoration-none text-dark">
                <div><i class="bi bi-heart me-2"></i>Help & Support</div>
                <i class="bi bi-chevron-right"></i>
              </a>
              <a href="/logout"
                class="d-flex justify-content-between align-items-center py-3 text-decoration-none text-dark">
                <div><i class="bi bi-heart me-2"></i>Logout</div>
                <i class="bi bi-chevron-right"></i>
              </a>
            </div>
    </div>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
      .then(() => console.log('SW registered'))
      .catch(err => console.error('SW registration failed', err));
  }
</script>

</body>

</html>